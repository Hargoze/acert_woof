{"ast":null,"code":"import fetch from 'isomorphic-unfetch';\n\nasync function fetchAPI(query, {\n  variables\n} = {}) {\n  const res = await fetch(`http://localhost:1337/graphql`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      query,\n      variables\n    })\n  });\n  const json = await res.json();\n\n  if (json.errors) {\n    console.error(json.errors);\n    throw new Error('Failed to fetch API');\n  }\n\n  return json.data;\n}\n\nexport async function getAllData() {\n  const data = await fetchAPI(`\n      query {\n        section: sections {\n          titre\n          description\n          image {\n            url\n          }\n          direction\n        }\n        reco: recommandations {\n          name\n          job\n          quote\n          profile {\n            url\n          }\n        }\n      }      \n    `);\n  return data;\n}","map":{"version":3,"sources":["/home/francois/Documents/stage/acert_woof/lib/api.js"],"names":["fetch","fetchAPI","query","variables","res","method","headers","body","JSON","stringify","json","errors","console","error","Error","data","getAllData"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,oBAAlB;;AAEA,eAAeC,QAAf,CAAwBC,KAAxB,EAA+B;AAAEC,EAAAA;AAAF,IAAgB,EAA/C,EAAmD;AAC/C,QAAMC,GAAG,GAAG,MAAMJ,KAAK,CAAE,+BAAF,EAAkC;AACvDK,IAAAA,MAAM,EAAE,MAD+C;AAEvDC,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT,KAF8C;AAKvDC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBP,MAAAA,KADmB;AAEnBC,MAAAA;AAFmB,KAAf;AALiD,GAAlC,CAAvB;AAWA,QAAMO,IAAI,GAAG,MAAMN,GAAG,CAACM,IAAJ,EAAnB;;AACA,MAAIA,IAAI,CAACC,MAAT,EAAiB;AACfC,IAAAA,OAAO,CAACC,KAAR,CAAcH,IAAI,CAACC,MAAnB;AACA,UAAM,IAAIG,KAAJ,CAAU,qBAAV,CAAN;AACD;;AAED,SAAOJ,IAAI,CAACK,IAAZ;AACH;;AAED,OAAO,eAAeC,UAAf,GAA4B;AAC/B,QAAMD,IAAI,GAAG,MAAMd,QAAQ,CACxB;;;;;;;;;;;;;;;;;;;KADwB,CAA3B;AAqBA,SAAOc,IAAP;AACH","sourcesContent":["import fetch from 'isomorphic-unfetch';\n\nasync function fetchAPI(query, { variables } = {}) {\n    const res = await fetch(`http://localhost:1337/graphql`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        query,\n        variables,\n      }),\n    })\n  \n    const json = await res.json()\n    if (json.errors) {\n      console.error(json.errors)\n      throw new Error('Failed to fetch API')\n    }\n  \n    return json.data\n}\n\nexport async function getAllData() {\n    const data = await fetchAPI(\n      `\n      query {\n        section: sections {\n          titre\n          description\n          image {\n            url\n          }\n          direction\n        }\n        reco: recommandations {\n          name\n          job\n          quote\n          profile {\n            url\n          }\n        }\n      }      \n    `)\n    return data\n}"]},"metadata":{},"sourceType":"module"}